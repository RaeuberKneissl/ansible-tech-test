---
# Production-specific nginx configuration
nginx_worker_processes: auto
nginx_worker_connections: 2048

# Production security and performance settings
nginx_main_template:
  template_file: nginx.conf.j2
  conf_file_name: nginx.conf
  conf_file_location: /etc/nginx/
  user: www-data
  worker_processes: "{{ nginx_worker_processes }}"
  worker_connections: "{{ nginx_worker_connections }}"
  keepalive_timeout: 65
  server_tokens: "off"
  gzip: true
  gzip_vary: true
  gzip_min_length: 1024
  gzip_types:
    - text/plain
    - text/css
    - application/json
    - application/javascript
    - text/xml
    - application/xml
    - application/xml+rss
    - text/javascript

# Production logging
nginx_access_log_format:
  - name: main
    format: |
      '$remote_addr - $remote_user [$time_local] "$request" '
      '$status $body_bytes_sent "$http_referer" '
      '"$http_user_agent" "$http_x_forwarded_for" '
      'rt=$request_time uct="$upstream_connect_time" '
      'uht="$upstream_header_time" urt="$upstream_response_time"'
